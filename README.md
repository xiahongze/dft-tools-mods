# dft-tools-mods
Convenient tools and useful home-brewed modifications for DFT software

## qe-plotter

A handy Python plotting script for Quantum Espresso (QE).

It reads the band-structure data file generated by QE and plots the data with matplotlib. Currently, it supports both electron and phonon bands.

Usage:

```python
from qeplotter import plot 
point_names = ['$\Gamma$','X','U','L','$\Gamma$','K','X','W']
Q = [0,20,30,40,65,85,95,105]
ef = 7.4953
plot(infile="some_electron_bands.txt",Q=Q,point_names=point_names,efermi=ef)
```

Or

```python
from qeplotter import plot 
point_names = ['$\Gamma$','X','U','L','$\Gamma$','K','X','W']
Q = [0,20,30,40,65,85,95,105]
plot(infile="some_phonon_bands.txt",Q=Q,phonon=True,point_names=point_names,phdos="phonon_dos.txt")
```

## ab-plotter
A handy Python script to plot electron band-structures from ABINIT.
The input file has a post-fix like `_DS_EIG` and `_DS1_EIG` if you enable ABINIT to dump its eigen-energies.

An example can be:

```python
import numpy as np
from abplotter import plot

a = np.array(
[[5.7735026919E-01, 0.0000000000E+00, 8.1649658093E-01],
[-2.8867513459E-01, 5.0000000000E-01, 8.1649658093E-01],
[-2.8867513459E-01, -5.0000000000E-01, 8.1649658093E-01]]
) # lattice vectors
q = [0,40,20,20,40,40,20,20] # segments of each high symmetry line
Q = np.cumsum(q)
point_names = ['$\Gamma$', 'X', 'U', 'L', '$\Gamma$', 'K', 'X', 'W']
plot(a,"abinit.abo_DS2_EIG",Q,point_names,ymin=-5,ymax=8,fildos="abinit.abo_DS3_DOS") # with DOS
# plot(a,"abinit.abo_DS2_EIG",Q,point_names) # without DOS
```

## qe-ph-pdos-mod

The modifications in this part enable QE to seamlessly compute the partial/projected density of states for phonons. In the output file of a DOS calculation, one will find the total and the partial DOS (decomposed to each atom in the system).

I would suggest backup the original files before recompiling the software with this patch.

The following two files need to be replaced.

```
$YOUR_DIR_TO_QE/PHonon/PH/matdyn.f90
```

and

```
$YOUR_DIR_TO_QE/flib/dost.f90
```

After replacing these two files, you can `cd $YOUR_DIR_TO_QE/PHonon/PH` and `make` to update QE.